(function(a){a.fn.combinate=function(b){return this.each(function(){var c=a.extend({combineClass:"combinate",resultElement:"",separator:"",exclude:"",debug:!1},b||{}),d=a(this),e="",f=d.find(":input"),g=[],h=c.combineClass+"-combinated",i=function(a){c.debug&&console.log!==void 0&&console.log(a)};if(a.each(f,function(b,d){a(d).hasClass(c.combineClass)&&g.push(d)}),g=a(g).not(c.exclude).map(function(){return""!==a(this).val()?this:void 0}),a.each(g,function(b,d){e+=a(d).val(),g.length>b+1&&(e+=c.separator)}),i(e),""!==c.resultElement)a(c.resultElement).val(e);else{var j=d.find("#"+h);if(j.length>0)j.val(e);else{var k=a("<input type='hidden'>");k.attr({id:h,name:h}),k.val(e),d.append(k)}}})},a.fn.decombinate=function(b){return this.each(function(){var c=a.extend({resultClass:"decombinate",pieceLength:0,exclude:"",debug:!1},b||{}),d=a(this),e=a("."+c.resultClass),f=[],g=function(a){c.debug&&console.log!==void 0&&console.log(a)},h=d.val();g("combined: "+h),a.each(e,function(b,d){a(d).hasClass(c.resultClass)&&f.push(d)}),f=a(f).not(c.exclude),a.each(f,function(b,d){var e=1,f=a(d),i=a(d).attr("maxlength");0!==c.pieceLength&&(e=c.pieceLength),i!==void 0&&(i=Math.abs(parseInt(i)),(c.pieceLength>i||0==c.pieceLength)&&(e=i));var j=h.slice(0,e);h=h.slice(e),g("["+b+"] l = "+e+" : "+j),f.val(j)})})}})(jQuery);